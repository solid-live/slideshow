var SolidClient=function(t){function e(i){if(r[i])return r[i].exports;var n=r[i]={exports:{},id:i,loaded:!1};return t[i].call(n.exports,n,n.exports,e),n.loaded=!0,n.exports}var r={};return e.m=t,e.c=r,e.p="",e(0)}(function(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))switch(typeof t[e]){case"function":break;case"object":t[e]=function(e){var r=e.slice(1),i=t[e[0]];return function(t,e,n){i.apply(this,[t,e,n].concat(r))}}(t[e]);break;default:t[e]=t[t[e]]}return t}([function(t,e,r){t.exports=r(1)},function(t,e,r){"use strict";var i=r(2),n=r(4),o=r(11),s=r(25),a=r(9)(i),u=r(13)(i),p={acl:n.acl,AppRegistration:r(28),appRegistry:r(27),auth:o,config:r(34),currentUser:o.currentUser,identity:r(25),login:o.login,meta:r(35),rdflib:i,signup:o.signup,status:r(37),typeRegistry:r(32),vocab:a,web:u};p.clearPermissions=function(t){return n.clearPermissions(t,u)},p.discoverWebID=function(t){return s.discoverWebID(t,u,a)},p.getPermissions=function(t){return n.getPermissions(t,u,i)},p.getProfile=function(t,e){return s.getProfile(t,e,u,i)},t.exports=p},function(t,e,r){"use strict";var i;i="undefined"!=typeof $rdf?$rdf:"undefined"!=typeof tabulator?tabulator.rdf:r(3),t.exports=i},function(t,e){t.exports=$rdf},function(t,e,r){"use strict";function i(t,e){var r;return e.head(t).then(function(t){if(r=t.aclAbsoluteUrl(),!r)throw new Error("ACL URL not found for resource.");return e.del(r)})}function n(t,e,r){var i,n;return e.head(t).then(function(s){if(i=s.aclAbsoluteUrl(),!i)throw new Error("ACL URL not found for resource.");return n=new o(t,i,s.isContainer(),r,e),e.get(i).then(function(t){return t.parsedGraph()})}).then(function(t){return n.initFromGraph(t),n})}var o=r(5);t.exports.clearPermissions=i,t.exports.getPermissions=n},function(t,e,r){"use strict";function i(t,e,r,i,n){this.authorizations={},this.aclUrl=e,this.rdf=i,this.resourceType=r?U:T,this.resourceUrl=t,this.webClient=n}function n(t){var e=t.hashFragment();return e in this.authorizations?this.authorizations[e].mergeWith(t):this.authorizations[e]=t,this}function o(t,e){var r=new R(this.resourceUrl,this.isAuthInherited());return r.setGroup(t),r.addMode(e),this.addAuthorization(r),this}function s(t,e,r){if(!t)throw new Error("addPermission() requires a valid webId");if(!e)throw new Error("addPermission() requires a valid accessMode");var i=new R(this.resourceUrl,this.isAuthInherited());return i.setAgent(t),i.addMode(e),r&&i.addOrigin(r),this.addAuthorization(i),this}function a(){var t,e=[],r=this;return Object.keys(this.authorizations).forEach(function(i){t=r.authorizations[i],e.push(t)}),e}function u(t){var e=t.graph();return this.allAuthorizations().forEach(function(r){e.add(r.rdfStatements(t))}),e}function p(t){if(t=t||this.webClient,!t)return Promise.reject(new Error("Cannot clear - no web client"));var e=this.aclUrl;return e?t.del(e):Promise.reject(new Error("Cannot clear - unknown target url"))}function c(){return Object.keys(this.authorizations).length}function l(t){var e=this,r=this.resourceUrl===t.resourceUrl,i=this.aclUrl===t.aclUrl,n=this.resourceType===t.resourceType,o=Object.keys(this.authorizations),s=Object.keys(t.authorizations);if(o.length!==s.length)return!1;var a,u,p=!0;return o.forEach(function(r){a=e.authorizations[r],u=t.authorizations[r],u||(p=!1),a.equals(u)||(p=!1)}),r&&i&&n&&p}function h(t){var e=this;this.allAuthorizations().forEach(function(r){t.call(e,r)})}function d(t,e){e=e||this.rdf;var r,i,n,o,s,a,u,p,c,l=E(e),h=t.statementsMatching(null,null,l.acl("Authorization")),d=this;h.forEach(function(e){r=e.subject,i=t.statementsMatching(r,l.acl("agent")),n=i.filter(x),i=i.filter(function(t){return!x(t)}),o=t.statementsMatching(r,l.acl("agentClass")),s=t.statementsMatching(r,l.acl("accessTo")),u=t.statementsMatching(r,l.acl("mode")),p=t.statementsMatching(r,l.acl("origin")),c=t.any(r,l.acl("defaultForNew"))||t.any(r,l.acl("default")),i.forEach(function(t){s.forEach(function(e){a=new R(e.object.uri,c),a.setAgent(t),a.addMode(u),a.addOrigin(p),n.forEach(function(t){a.addMailTo(t)}),d.addAuthorization(a)})}),o.forEach(function(t){s.forEach(function(e){a=new R(e.object.uri,c),a.setGroup(t),a.addMode(u),a.addOrigin(p),d.addAuthorization(a)})})})}function f(){return this.resourceType===U}function y(){return 0===this.count()}function g(t,e){if(!t)return null;e=e||this.resourceUrl;var r=R.hashFragmentFor(t,e);return this.authorizations[r]}function m(t){var e=t.hashFragment();return delete this.authorizations[e],this}function w(t,e){var r=this.permissionFor(t,this.resourceUrl);return r?(r.removeMode(e),r.isEmpty()&&this.removeAuthorization(r),this):this}function v(t,e,r){return(t=t||this.aclUrl)?(e=e||this.rdf)?(r=r||this.webClient,r?r.put(t,this.serialize(e)):Promise.reject(new Error("Cannot save - no web client"))):Promise.reject(new Error("Cannot save - no rdf library")):Promise.reject(new Error("Cannot save - unknown target url"))}function b(t,e){t=t||"text/turtle",e=e||this.rdf;var r=this.buildGraph(e),i=null,n=null;return new Promise(function(o,s){e.serialize(i,r,n,t,function(e,r){return e?s(e):r?void o(r):s(new Error("Error serializing the graph to "+t))})})}function x(t){return"string"==typeof t?t.startsWith("mailto:"):t.object.uri.startsWith("mailto:")}var R=r(6),E=r(9),T="resource",U="container";i.prototype.addAuthorization=n,i.prototype.addGroupPermission=o,i.prototype.addPermission=s,i.prototype.allAuthorizations=a,i.prototype.buildGraph=u,i.prototype.clear=p,i.prototype.count=c,i.prototype.equals=l,i.prototype.forEach=h,i.prototype.initFromGraph=d,i.prototype.isAuthInherited=f,i.prototype.isEmpty=y,i.prototype.permissionFor=g,i.prototype.removeAuthorization=m,i.prototype.removePermission=w,i.prototype.save=v,i.prototype.serialize=b,t.exports=i,t.exports.RESOURCE=T,t.exports.CONTAINER=U,t.exports.isMailTo=x},function(t,e,r){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(){var t=u(),e={READ:t.acl("Read"),WRITE:t.acl("Write"),APPEND:t.acl("Append"),CONTROL:t.acl("Control"),EVERYONE:t.foaf("Agent")};return e}function o(t,e){var r=t+"-"+e;return a.unique(r)}var s=function(){function t(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,r,i){return r&&t(e.prototype,r),i&&t(e,i),e}}(),a=r(7),u=r(9),p=!0,c=function(){function t(e,r){i(this,t),this.accessModes={},this.agent=null,this.group=null,this.inherited=r,this.mailTo=[],this.originsAllowed={},this.resourceUrl=e}return s(t,[{key:"addMailTo",value:function(t){"string"!=typeof t&&(t=t.object.uri),t.startsWith("mailto:")&&(t=t.split(":")[1]),this.mailTo.push(t),this.mailTo.sort()}},{key:"addMode",value:function(t){var e=this;return Array.isArray(t)?t.forEach(function(t){e.addModeSingle(t)}):e.addModeSingle(t),e}},{key:"addModeSingle",value:function(t){return"string"!=typeof t&&(t=t.object.uri),this.accessModes[t]=!0,this}},{key:"addOrigin",value:function(t){var e=this;return Array.isArray(t)?t.forEach(function(t){e.addOriginSingle(t)}):e.addOriginSingle(t),e}},{key:"addOriginSingle",value:function(t){return"string"!=typeof t&&(t=t.object.uri),this.originsAllowed[t]=!0,this}},{key:"allModes",value:function(){return Object.keys(this.accessModes)}},{key:"allOrigins",value:function(){return Object.keys(this.originsAllowed)}},{key:"allowsOrigin",value:function(t){return t in this.originsAllowed}},{key:"allowsRead",value:function(){return this.accessModes[t.acl.READ]}},{key:"allowsWrite",value:function(){return this.accessModes[t.acl.WRITE]}},{key:"allowsAppend",value:function(){return this.accessModes[t.acl.APPEND]||this.accessModes[t.acl.WRITE]}},{key:"allowsControl",value:function(){return this.accessModes[t.acl.CONTROL]}},{key:"equals",value:function(t){var e=this.agent===t.agent,r=this.group===t.group,i=this.resourceUrl===t.resourceUrl,n=Object.keys(this.accessModes),o=Object.keys(t.accessModes),s=n.length===o.length,a=JSON.stringify(this.inherited)===JSON.stringify(t.inherited),u=!0;n.forEach(function(e){t.accessModes[e]||(u=!1)});var p=JSON.stringify(this.mailTo)===JSON.stringify(t.mailTo),c=JSON.stringify(this.originsAllowed)===JSON.stringify(t.originsAllowed);return e&&r&&i&&s&&u&&a&&p&&c}},{key:"hashFragment",value:function e(){if(!this.webId||!this.resourceUrl)throw new Error("Cannot call hashFragment() on an incomplete authorization");var e=o(this.webId(),this.resourceUrl);return e}},{key:"isAgent",value:function(){return this.agent}},{key:"isEmpty",value:function(){return 0===Object.keys(this.accessModes).length}},{key:"isPublic",value:function(){return this.group===t.acl.EVERYONE}},{key:"isGroup",value:function(){return this.group}},{key:"isInherited",value:function(){return this.inherited}},{key:"isValid",value:function(){return this.webId()&&this.resourceUrl&&!this.isEmpty()}},{key:"mergeWith",value:function(t){if(this.hashFragment()!==t.hashFragment())throw new Error("Cannot merge authorizations with different agent id or resource url (accessTo)");for(var e in t.accessModes)this.addMode(e)}},{key:"rdfStatements",value:function(t){if(!this.webId()||!this.resourceUrl)return[];var e,r=t.namedNode("#"+this.hashFragment()),i=u(t),n=[t.triple(r,i.rdf("type"),i.acl("Authorization"))];this.agent&&(e=t.triple(r,i.acl("agent"),t.namedNode(this.agent)),n.push(e)),this.mailTo.length>0&&this.mailTo.forEach(function(o){e=t.triple(r,i.acl("agent"),t.namedNode("mailto:"+o)),n.push(e)}),this.group&&(e=t.triple(r,i.acl("agentClass"),t.namedNode(this.group)),n.push(e)),e=t.triple(r,i.acl("accessTo"),t.namedNode(this.resourceUrl)),n.push(e);var o=Object.keys(this.accessModes);return o.forEach(function(o){e=t.triple(r,i.acl("mode"),t.namedNode(o)),n.push(e)}),this.inherited&&(e=t.triple(r,i.acl("defaultForNew"),t.namedNode(this.resourceUrl)),n.push(e)),this.allOrigins().forEach(function(o){e=t.triple(r,i.acl("origin"),t.namedNode(o)),n.push(e)}),n}},{key:"removeMode",value:function(t){var e=this;return Array.isArray(t)?t.forEach(function(t){e.removeModeSingle(t)}):e.removeModeSingle(t),e}},{key:"removeModeSingle",value:function(t){"string"!=typeof t&&(t=t.object.uri),delete this.accessModes[t]}},{key:"removeOrigin",value:function(t){var e=this;return Array.isArray(t)?t.forEach(function(t){e.removeOriginSingle(t)}):e.removeOriginSingle(t),e}},{key:"removeOriginSingle",value:function(t){"string"!=typeof t&&(t=t.object.uri),delete this.originsAllowed[t]}},{key:"setAgent",value:function(e){if("string"!=typeof e&&(e=e.object.uri),e===t.acl.EVERYONE)this.setPublic();else if(this.group)throw new Error("Cannot set agent, authorization already has a group set");e.startsWith("mailto:")?this.addMailTo(e):this.agent=e}},{key:"setGroup",value:function(t){if("string"!=typeof t&&(t=t.object.uri),this.agent)throw new Error("Cannot set group, authorization already has an agent set");this.group=t}},{key:"setPublic",value:function(){this.setGroup(t.acl.EVERYONE)}},{key:"webId",value:function(){return this.agent||this.group}}]),t}();c.acl=n(),c.hashFragmentFor=o,c.INHERIT=p,t.exports=c},function(t,e,r){"use strict";t.exports=r(8)},function(t,e){"use strict";function r(t){var e=0;if(0==t.length)return e;for(var r=0;r<t.length;r++){var i=t.charCodeAt(r);e=(e<<5)-e+i,e&=e}return e}function i(t,e){function r(t){var e="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";return e[t]}e=e||62;var i,n=[],o="",s=t<0?"-":"";for(t=Math.abs(t);t>=e;)i=t%e,t=Math.floor(t/e),n.push(r(i));t>0&&n.push(r(t));for(var a=n.length-1;a>=0;a--)o+=n[a];return s+o}function n(t){var e=i(r(t),61);return e.replace("-","Z")}function o(t){for(var e="0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz",r="",i=t||8,n=0;n<i;n++){var o=Math.floor(Math.random()*e.length);r+=e.substring(o,o+1)}return r}e.bitwise=r,e.binaryTransfer=i,e.unique=n,e.random=o},function(t,e,r){"use strict";function i(t){var e=r(10)(t),i={acl:e.base("http://www.w3.org/ns/auth/acl#"),app:e.base("http://www.w3.org/ns/solid/app#"),dct:e.base("http://purl.org/dc/terms/"),foaf:e.base("http://xmlns.com/foaf/0.1/"),ldp:e.base("http://www.w3.org/ns/ldp#"),owl:e.base("http://www.w3.org/2002/07/owl#"),pim:e.base("http://www.w3.org/ns/pim/space#"),rdf:e.base("http://www.w3.org/1999/02/22-rdf-syntax-ns#"),rdfs:e.base("http://www.w3.org/2000/01/rdf-schema#"),schema:e.base("http://schema.org/"),sioc:e.base("http://rdfs.org/sioc/ns#"),solid:e.base("http://www.w3.org/ns/solid/terms#"),vcard:e.base("http://www.w3.org/2006/vcard/ns#"),xsd:e.base("http://www.w3.org/2001/XMLSchema#")};return i}t.exports=i},function(t,e){"use strict";function r(t){this.rdf=t}function i(t){return new r(t)}t.exports=i,r.prototype.base=function(t){var e=this;return function(r){return e.rdf?e.rdf.namedNode(t+r):t+r}}},function(t,e,r){"use strict";function i(t,e){this.webClient=t||r(13)(),this.config=e||n}t.exports=i;var n=r(12);i.prototype.currentUser=function(){if("undefined"==typeof window)return null;var t=window.location.href;return this.login(t)["catch"](function(t){return console.log("Detecting current user failed: %o",t),null})},i.prototype.listen=function(){var t=new Promise(function(t,e){var r=window.addEventListener?"addEventListener":"attachEvent",i=window[r],n="attachEvent"===r?"onmessage":"message";i(n,function(r){var i=r.data;if("User:"===i.slice(0,5)){var n=i.slice(5,i.length);return n&&n.length>0&&"http"===n.slice(0,4)?t(n):e(n)}},!0)});return t},i.prototype.login=function(t,e){var r=this.config.authEndpoint;t=t||window.location.origin+window.location.pathname,e=e||r;var i=this.webClient;return i.head(t).then(function(t){return t.isLoggedIn()?t.user:i.head(e).then(function(t){return t.user})})},i.prototype.signup=function(t){t=t||this.config.signupEndpoint;var e=this.config.signupWindowWidth,r=this.config.signupWindowHeight,i=window.screen.width/2-(e/2+10),n=window.screen.height/2-(r/2+50),o="Solid signup",s=t+"?origin="+encodeURIComponent(window.location.origin),a="resizable,scrollbars,status,width="+e+",height="+r+",left="+i+",top="+n;window.open(s,o,a);var u=this;return new Promise(function(t){u.listen().then(function(e){return t(e)})})}},function(t,e){"use strict";t.exports={authEndpoint:"https://databox.me/",signupEndpoint:"https://solid.github.io/solid-idps/",signupWindowHeight:600,signupWindowWidth:1024}},function(t,e,r){"use strict";function i(t,e){this.rdf=t,this.vocab=d(t),this.config=e||a}function n(t,e){return new i(t,e)}var o="text/turtle;q=0.8,*/*;q=0.5",s="text/turtle",a=r(14),u=r(15).composePatchQuery,p=r(16),c=r(18),l=r(20),h=r(22),d=r(9);i.prototype.createContainer=function(t,e,r,i){return this.post(t,i,e,!0)},i.prototype.createResponse=function(t,e){var r=new p(this.rdf,t,e);return"get"===r.method&&r.isContainer()?new c(this.rdf,r.location,r):r},i.prototype.currentUrl=function(){return"undefined"!=typeof window?window.location.href:null},i.prototype.del=function(t){return this.solidRequest(t,"DELETE")},i.prototype.get=function(t,e){return e.headers.Accept||(e.headers.Accept=o),this.solidRequest(t,"GET",e)},i.prototype.head=function(t,e){return this.solidRequest(t,"HEAD",e)},i.prototype.loadParsedGraphs=function(t,e){var r=this,i=t.map(function(t){return r.get(t,e).then(function(t){return t.parsedGraph()})["catch"](function(){return null}).then(function(e){return{uri:t,value:e}})});return Promise.all(i)},i.prototype.needsProxy=function(t){var e=this.currentUrl(),r=e&&"https:"===e.slice(0,6),i=t&&"http:"===t.slice(0,5);return r&&i},i.prototype.options=function(t){return this.solidRequest(t,"OPTIONS")},i.prototype.patch=function(t,e,r,i){var n=u(e,r),o="application/sparql-update";return i=i||{},i.headers=i.headers||{},i.headers["Content-Type"]=o,this.solidRequest(t,"PATCH",i,n)},i.prototype.post=function(t,e,r,i,n){var o;i?(o=this.vocab.ldp("BasicContainer"),n="text/turtle"):(o=this.vocab.ldp("Resource"),n=n||s);var a={};return a.headers={},a.headers.Link=o+'; rel="type"',a.headers["Content-Type"]=n,r&&r.length>0&&(a.headers.Slug=r),this.solidRequest(t,"POST",a,e)},i.prototype.proxyUrl=function(t,e){return e=e||this.config.proxyUrl,e.replace("{uri}",encodeURIComponent(t))},i.prototype.put=function(t,e,r,i){return i=i||{},i.headers=i.headers||{},r=r||s,i.headers["Content-Type"]=r,this.solidRequest(t,"PUT",i,e)},i.prototype.solidRequest=function(t,e,r,i){r=r||{},r.headers=r.headers||{},r.proxyUrl=r.proxyUrl||this.config.proxyUrl,r.timeout=r.timeout||this.config.timeout,(this.needsProxy(t)||r.forceProxy)&&(t=this.proxyUrl(t));var n=this;return new Promise(function(o,s){var a=new l;a.open(e,t),r.noCredentials||(a.withCredentials=!0);for(var u in r.headers)a.setRequestHeader(u,r.headers[u]);r.timeout&&(a.timeout=r.timeout),a.onload=function(){this.status>=200&&this.status<300?o(n.createResponse(this,e)):s(new h(this.status,this.statusText,{xhr:this}))},a.onerror=function(){s(new h(this.status,this.statusText,{xhr:this}))},"undefined"!=typeof i&&i?a.send(i):a.send()})},t.exports=n,t.exports.SolidWebClient=i},function(t,e){"use strict";t.exports={proxyUrl:"https://databox.me/,proxy?uri={uri}",timeout:5e4}},function(t,e){"use strict";function r(t,e){return e&&"http"!==e.slice(0,4)?[t,e].map(function(t){return"/"===t[0]&&(t=t.slice(1)),"/"===t[t.length-1]&&(t=t.slice(0,t.length-1)),t}).join("/"):e}function i(t,e){var r="",i=!0;return t&&t.length>0&&(t=t.map(function(t){return a(t,i)}),r+="DELETE DATA { "+t.join(" . ")+" };\n"),e&&e.length>0&&(e=e.map(function(t){return a(t,i)}),r+="INSERT DATA { "+e.join(" . ")+" };\n"),r}function n(t){var e,r,i,n,o=t.split("//");return 2===o.length?(e=o[0],r=o[1]):r=t,n=r.split("/"),i=e?e+"//"+n[0]:n[0],t.startsWith("//")&&(i="//"+i),i}function o(t,e){var r={};if(t){var i=t.split(",");i.forEach(function(e){e&&t.indexOf(e)>=0&&(r[e.trim().toLowerCase()]=!0)})}return e&&e.indexOf("application/sparql-update")>=0&&(r.patch=!0),r}function s(t){if(!t)return{};for(var e=/<[^>]*>\s*(\s*;\s*[^\(\)<>@,;:"\/\[\]\?={} \t]+=(([^\(\)<>@,;:"\/\[\]\?={} \t]+)|("[^"]*")))*(,|$)/g,r=/[^\(\)<>@,;:"\/\[\]\?={} \t]+=(([^\(\)<>@,;:"\/\[\]\?={} \t]+)|("[^"]*"))/g,i=t.match(e),n={},o=0;o<i.length;o++)for(var s=i[o].split(">"),a=s[0].substring(1),u=s[1],p=u.match(r),c=0;c<p.length;c++){var l=p[c],h=l.split("="),d=h[1].replace(/["']/g,"");n[d]||(n[d]=[]),n[d].push(a),n[d].length>1&&n[d].sort()}return n}function a(t,e){return"string"!=typeof t&&(t=t.toCanonical()),e&&t.endsWith(".")&&(t=t.slice(0,-1)),t}t.exports.absoluteUrl=r,t.exports.composePatchQuery=i,t.exports.hostname=n,t.exports.parseAllowedMethods=o,t.exports.parseLinkHeader=s,t.exports.statementToNT=a},function(t,e,r){"use strict";function i(t,e,r){if(!e)return this.xhr=null,this.user="",this.method=null,this.types=[],void(this.graph=null);this.rdf=t;var i=e.getResponseHeader("Link");this.linkHeaders=n.parseLinkHeader(i)||{},r=r?r.toLowerCase():"",this.method=r,this.acl=this.linkHeaders.acl,this.acl&&(this.acl=this.acl[0]),this.allowedMethods=this.parseAllowedMethods(e,r),this.graph=null,this.meta=this.linkHeaders.meta||this.linkHeaders.describedBy,this.meta&&(this.meta=this.meta[0]),this.types=this.linkHeaders.type||[],this.url=e.getResponseHeader("Location")||e.responseURL,this.user=e.getResponseHeader("User")||"",this.websocket=e.getResponseHeader("Updates-Via")||"",this.xhr=e}t.exports=i;var n=r(15),o=r(17);i.prototype.aclAbsoluteUrl=function s(){if(!this.acl)return this.acl;var s=n.absoluteUrl(this.url,this.acl);return s},i.prototype.contentType=function(){return this.xhr?this.xhr.getResponseHeader("Content-Type"):null},i.prototype.exists=function(){return this.xhr&&this.xhr.status>=200&&this.xhr.status<400},i.prototype.isContainer=function(){return this.isType("http://www.w3.org/ns/ldp#Container")||this.isType("http://www.w3.org/ns/ldp#BasicContainer")},i.prototype.isLoggedIn=function(){return this.user},i.prototype.isType=function(t){return this.types.indexOf(t)!==-1},i.prototype.metaAbsoluteUrl=function a(){if(!this.meta)return this.meta;var a=n.absoluteUrl(this.url,this.meta);return a},i.prototype.parseAllowedMethods=function(t,e){return"get"===e?{}:n.parseAllowedMethods(t.getResponseHeader("Allow"),t.getResponseHeader("Accept-Patch"))},i.prototype.parsedGraph=function(){return this.graph||(this.graph=o.parseGraph(this.rdf,this.url,this.raw(),this.contentType())),this.graph},i.prototype.raw=function(){return this.xhr?this.xhr.response:null}},function(t,e){"use strict";function r(t,e,r){e.statementsMatching(a).forEach(function(e){t.add(e.subject,e.predicate,e.object,e.why)})}function i(t,e){var r=t.graph();return e.forEach(function(t){r.addStatement(t)}),r}function n(t,e,r,i){var n=t.graph();return t.parse(r,n,e,i),n}function o(t,e,r,i,n){var o={},s=t.statementsMatching(e,r,i,n);return s.forEach(function(t){o[t.object.uri]=!0}),Object.keys(o)}function s(t){var e=t.map(function(t){return t.toNT()});return e=e.join("\n")}t.exports.appendGraph=r,t.exports.parseGraph=n,t.exports.parseLinks=o,t.exports.serializeStatements=s,t.exports.graphFromStatements=i;var a=null},function(t,e,r){"use strict";function i(t,e,r){a.call(this,e,r),this.containers={},this.contentsUris=[],this.rdf=t,this.resources={},this.vocab=s(t),r&&this.initFromResponse(this.uri,r)}t.exports=i;var n=r(17),o=n.parseLinks,s=r(9),a=r(19);i.prototype=Object.create(a.prototype),i.prototype.constructor=i,i.prototype.appendFromGraph=function(t,e){var r=this.rdf.namedNode(this.uri);this.types=Object.keys(t.findTypeURIs(r));var n=o(t,null,this.vocab.ldp("contains"));this.contentsUris=this.contentsUris.concat(n.sort());var s,u=t.each(null,null,this.vocab.ldp("Container")),p=this;u.forEach(function(e){e.uri!==p.uri&&(s=new i(p.rdf,e.uri),s.types=Object.keys(t.findTypeURIs(e)),p.containers[s.uri]=s)});var c,l,h,d;n.forEach(function(e){l=e in p.containers,c=e!==p.uri&&!l,c&&(h=new a(e),d=p.rdf.namedNode(e),h.types=Object.keys(t.findTypeURIs(d)),p.resources[e]=h)})},i.prototype.findByType=function(t){var e,r,i=[];for(e in this.containers)r=this.containers[e],r.isType(t)&&i.push(r);var n;for(e in this.resources)n=this.resources[e],n.isType(t)&&i.push(n);return i},i.prototype.initFromResponse=function(t,e){var r=e.contentType();if(!r)throw new Error("Cannot parse container without a Content-Type: header");var i=n.parseGraph(this.rdf,t,e.raw(),r);this.parsedGraph=i,this.appendFromGraph(i,t)},a.prototype.isContainer=function(){return!0},i.prototype.isEmpty=function(){return 0===this.contentsUris.length}},function(t,e){"use strict";function r(t,e){this.name=null,this.parsedGraph=null,this.response=e,this.types=[],this.uri=t,e&&e.url!==t&&(this.uri=e.url),this.initName()}t.exports=r,r.prototype.initName=function(){if(this.uri){var t=this.uri.split("/");this.name=t.pop(),!this.name&&t.length>0&&(this.name=t.pop())}},r.prototype.isContainer=function(){return!1},r.prototype.isType=function(t){return this.types.indexOf(t)!==-1}},function(t,e,r){"use strict";var i;i="undefined"!=typeof tabulator&&tabulator.isExtension?Components.classes["@mozilla.org/xmlextras/xmlhttprequest;1"].createInstance().QueryInterface(Components.interfaces.nsIXMLHttpRequest):"undefined"!=typeof window&&"XMLHttpRequest"in window?window.XMLHttpRequest:r(21),t.exports=i},function(t,e){t.exports=XMLHttpRequest},function(t,e,r){"use strict";function i(t,e,r){if("string"==typeof t&&(t=u[t]),"number"!=typeof t)throw new TypeError("Non-numeric HTTP code");"object"==("undefined"==typeof e?"undefined":o(e))&&null!=e&&(r=e,e=null),s.call(this,e||a[t],r),this.code=t}function n(t){return{configurable:!0,get:function(){return this[t]},set:function(e){return this[t]=e}}}var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};e=t.exports=i;var s=r(23),a=r(24),u=e;i.prototype=Object.create(s.prototype,{constructor:{value:i,configurable:!0,writable:!0}}),i.prototype.name="HttpError",Object.defineProperties(i.prototype,{statusCode:n("code"),statusMessage:n("message"),status:{configurable:!0,get:function(){return this.code},set:function(t){Object.defineProperty(this,"status",{value:t,configurable:!0,enumerable:!0,writable:!0})}}}),i.prototype.toString=function(){return this.name+": "+this.code+" "+this.message};for(var p in a){var c=a[p];e[c.replace("'","").replace(/[- ]/g,"_").toUpperCase()]=+p}},function(t,e){"use strict";function r(t,e){if(t&&"object"==("undefined"==typeof t?"undefined":i(t))?(e=t,t=void 0):this.message=t,e)for(var r in e)this[r]=e[r];n.call(this,"name")||(this.name=n.call(o(this),"name")?this.name:this.constructor.name),!s||"stack"in this||s(this,this.constructor)}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t},n=Object.hasOwnProperty,o=Object.getPrototypeOf,s=Error.captureStackTrace;t.exports=r,r.prototype=Object.create(Error.prototype,{constructor:{value:r,configurable:!0,writable:!0}}),r.prototype.name="StandardError"},function(t,e){t.exports={100:"Continue",101:"Switching Protocols",102:"Processing",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",208:"Already Reported",226:"IM Used",300:"Multiple Choices",301:"Moved Permanently",302:"Found",303:"See Other",304:"Not Modified",305:"Use Proxy",307:"Temporary Redirect",308:"Permanent Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Payload Too Large",414:"URI Too Long",415:"Unsupported Media Type",416:"Range Not Satisfiable",417:"Expectation Failed",418:"I'm a teapot",421:"Misdirected Request",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",425:"Unordered Collection",426:"Upgrade Required",428:"Precondition Required",429:"Too Many Requests",431:"Request Header Fields Too Large",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Timeout",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",508:"Loop Detected",509:"Bandwidth Limit Exceeded",510:"Not Extended",511:"Network Authentication Required"}},function(t,e,r){"use strict";function i(t,e,r){return e.options(t).then(function(t){var r=t.metaAbsoluteUrl();if(!r)throw new Error("Could not find a meta URL in the Link header");return e.get(r)}).then(function(e){var i=e.parsedGraph(),n=i.any(void 0,r.solid("account"));if(!n||!n.uri)throw new Error("Could not find a WebID matching the domain "+t);return n})}function n(t,e,r,i){return e=e||{},e.headers=e.headers||{Accept:"text/turtle"},e.noCredentials=!0,r.get(t,e).then(function(n){var a=n.parsedGraph(),u=new s(t,a,i,r,n);return u.isLoaded=!0,e.ignoreExtended?u:o(u,e,r)})}function o(t,e,r){var i=t.relatedProfilesLinks();return r.loadParsedGraphs(i,e).then(function(e){return e.forEach(function(e){e&&e.value&&t.appendFromGraph(e.value,e.uri)}),t})}t.exports.discoverWebID=i,t.exports.getProfile=n,t.exports.loadExtendedProfile=o;var s=r(26)},function(t,e,r){"use strict";function i(t,e,r,i,n){this.appRegistryListed={uri:null,graph:null},this.appRegistryUnlisted={uri:null,graph:null},this.inbox={uri:null,graph:null},this.isLoaded=!1,this.picture=null,this.name=null,this.rdf=r,this.storage=[],this.typeIndexListed={uri:null,graph:null},this.typeIndexUnlisted={uri:null,graph:null},this.parsedGraph=null,this.preferences={uri:null,graph:null},this.response=n,this.relatedProfiles={sameAs:[],seeAlso:[]},this.webId=null,this.webClient=i,t&&(this.baseProfileUrl=t.indexOf("#")>=0?t.slice(0,t.indexOf("#")):t,e&&(this.initWebId(e),this.appendFromGraph(e,this.baseProfileUrl)))}function n(t,e,r){var i=a(r),n=r.namedNode(t),o=i.foaf("primaryTopic"),s=e.any(n,o);return s}function o(t,e,r,i,n){var o=t.any(e,r,i,n);return o?o.uri:null}t.exports=i;var s=r(27),a=r(9),u=r(29),p=r(32),c=r(30),l=c.parseLinks,h="/settings/prefs.ttl",d="/profile/";i.prototype.appendFromGraph=function(t,e){if(t){var r=this.rdf,i=a(r);this.parsedGraph=this.parsedGraph||r.graph(),c.appendGraph(this.parsedGraph,t,e);var n,s=r.namedNode(this.webId);this.name||(this.name=this.find(i.foaf("name"))),this.picture||(this.picture=this.find(i.foaf("img"))),n=l(t,null,i.owl("sameAs")),this.relatedProfiles.sameAs=this.relatedProfiles.sameAs.concat(n),n=l(t,null,i.rdfs("seeAlso")),this.relatedProfiles.seeAlso=this.relatedProfiles.seeAlso.concat(n),this.preferences.uri||(this.preferences.uri=o(t,s,i.pim("preferencesFile"))),this.inbox.uri||(this.inbox.uri=o(t,s,i.solid("inbox"))),n=l(t,s,i.pim("storage")),this.storage=this.storage.concat(n),this.typeIndexListed.uri||(this.typeIndexListed.uri=o(t,s,i.solid("publicTypeIndex"))),this.typeIndexUnlisted.uri||(this.typeIndexUnlisted.uri=o(t,s,i.solid("privateTypeIndex"))),this.appRegistryListed.uri||(this.appRegistryListed.uri=o(t,s,i.solid("publicAppRegistry"))),this.appRegistryUnlisted.uri||(this.appRegistryUnlisted.uri=o(t,s,i.solid("privateAppRegistry")))}},i.prototype.appRegistryDefaultContainer=function(){var t,e=this.webId||this.baseProfileUrl;return t=e?e.replace(/\\/g,"/").replace(/\/[^\/]*\/?$/,"")+"/":d},i.prototype.appsForType=function(t){return s.appsForType(this,t,this.rdf)},i.prototype.find=function(t){if(!this.parsedGraph)throw new Error("Profile graph not yet loaded.");var e=this.rdf.namedNode(this.webId),r=this.parsedGraph.any(e,t);return r?r.value||r.uri:r},i.prototype.findAll=function(t){if(!this.parsedGraph)throw new Error("Profile graph not yet loaded.");var e=this.rdf.namedNode(this.webId),r=this.parsedGraph.statementsMatching(e,t);return r=r.map(function(t){return t.object.value||t.object.uri}),r.sort()},i.prototype.initWebId=function(t){if(t)try{this.webId=n(this.baseProfileUrl,t,this.rdf).uri}catch(e){throw new Error("Unable to parse WebID from profile: "+e)}},i.prototype.relatedProfilesLinks=function(){var t=[];return t=t.concat(this.relatedProfiles.sameAs).concat(this.relatedProfiles.seeAlso),this.preferences.uri&&(t=t.concat(this.preferences.uri)),t},i.prototype.hasAppRegistryPrivate=function(){if(!this.isLoaded)throw new Error("Must load profile before checking if registry exists.");return this.appRegistryUnlisted.uri},i.prototype.hasAppRegistryPublic=function(){if(!this.isLoaded)throw new Error("Must load profile before checking if registry exists.");return this.appRegistryListed.uri},i.prototype.hasStorage=function(){return this.storage&&this.storage.length>0},i.prototype.hasTypeRegistryPrivate=function(){if(!this.isLoaded)throw new Error("Must load profile before checking if registry exists.");return this.typeIndexUnlisted.uri},i.prototype.hasTypeRegistryPublic=function(){if(!this.isLoaded)throw new Error("Must load profile before checking if registry exists.");return this.typeIndexListed.uri},i.prototype.loadAppRegistry=function(t,e){return t=t||this.webClient,s.loadAppRegistry(this,t,e)},i.prototype.loadTypeRegistry=function(t,e){return t=t||this.webClient,p.loadTypeRegistry(this,t,e)},i.prototype.addAppRegistry=function(t,e){if(u.isListed(t,this.rdf))this.appRegistryListed.graph||(this.appRegistryListed.uri=e,this.appRegistryListed.graph=t);else{if(!u.isUnlisted(t,this.rdf))throw console.log(t),new Error("Attempting to add an invalid app registry resource");this.appRegistryUnlisted.graph||(this.appRegistryUnlisted.uri=e,this.appRegistryUnlisted.graph=t)}},i.prototype.addTypeRegistry=function(t,e){if(u.isListed(t,this.rdf))this.typeIndexListed.graph||(this.typeIndexListed.uri=e,this.typeIndexListed.graph=t);else{if(!u.isUnlisted(t,this.rdf))throw new Error("Attempting to add an invalid type registry index");this.typeIndexUnlisted.graph||(this.typeIndexUnlisted.uri=e,this.typeIndexUnlisted.graph=t)}},i.prototype.reloadAppRegistry=function(t){return this.resetAppRegistry(),this.loadAppRegistry(t)},i.prototype.reloadTypeRegistry=function(t){
return this.resetTypeRegistry(),this.loadTypeRegistry(t)},i.prototype.resetAppRegistry=function(){this.appRegistryListed.graph=null,this.appRegistryUnlisted.graph=null},i.prototype.resetTypeRegistry=function(){this.typeIndexListed.graph=null,this.typeIndexUnlisted.graph=null},i.prototype.typeRegistryForClass=function(t){return p.typeRegistryForClass(this,t,this.rdf)},i.prototype.typeRegistryDefaultContainer=function(){var t,e=this.webId||this.baseProfileUrl;return t=e?e.replace(/\\/g,"/").replace(/\/[^\/]*\/?$/,"")+"/":d},i.prototype.privateProfileUri=function(){return this.preferences&&this.preferences.uri?this.preferences.uri:h},i.prototype.registerApp=function(t,e){return e=e||this.webClient,s.registerApp(this,t,e)},i.prototype.registerType=function(t,e,r,i){return p.registerType(this,t,e,r,i,this.webClient)},i.prototype.unregisterType=function(t,e,r){return p.unregisterType(this,t,e,r,this.webClient)}},function(t,e,r){"use strict";function i(t,e,r){var i,n;if(e.isListed?(i=t.appRegistryListed.uri,n=t.appRegistryListed.graph):(i=t.appRegistryUnlisted.uri,n=t.appRegistryUnlisted.graph),!i)throw new Error("Cannot register app, registry URL missing");var o=t.rdf,s=[],a=e.rdfStatements(o);return r.patch(i,s,a).then(function(e){var r=d.graphFromStatements(a,o);return n?d.appendGraph(n,r):n=r,t})}function n(t,e,r){var i=[];return i.concat(l(t.appRegistryListed.graph,e,r)).concat(l(t.appRegistryUnlisted.graph,e,r))}function o(t){var e=y(t),r=t.namedNode(""),i=[t.triple(r,e.rdf("type"),e.solid("AppRegistry")),t.triple(r,e.rdf("type"),e.solid("UnlistedDocument"))],n={data:d.serializeStatements(i),graph:d.graphFromStatements(i,t),slug:"privateAppRegistry.ttl",uri:null};return n}function s(t){var e=y(t),r=t.namedNode(""),i=[t.triple(r,e.rdf("type"),e.solid("AppRegistry")),t.triple(r,e.rdf("type"),e.solid("ListedDocument"))],n={data:d.serializeStatements(i),graph:d.graphFromStatements(i,t),slug:"publicAppRegistry.ttl",uri:null};return n}function a(t,e,r){r=r||{};var i=t.rdf,n=y(i),s=t.appRegistryDefaultContainer(),a=i.namedNode(t.webId),u=o(i);return e.post(s,u.data,u.slug)["catch"](function(t){throw new Error("Could not create private registry document:",t)}).then(function(o){u.uri=f.absoluteUrl(g.hostname(s),o.url);var p=[i.triple(a,n.solid("privateAppRegistry"),i.namedNode(u.uri))],c=[];return e.patch(t.privateProfileUri(),c,p,r)})["catch"](function(t){throw new Error("Could not update profile with private registry:"+t)}).then(function(e){return t.appRegistryUnlisted=u,t})}function u(t,e,r){r=r||{};var i=t.rdf,n=y(i),o=t.appRegistryDefaultContainer(),a=i.namedNode(t.webId),u=s(i);return e.post(o,u.data,u.slug)["catch"](function(t){throw new Error("Could not create public registry document:",t)}).then(function(s){u.uri=f.absoluteUrl(g.hostname(o),s.url);var p=[i.triple(a,n.solid("publicAppRegistry"),i.namedNode(u.uri))],c=[];return e.patch(t.webId,c,p,r)})["catch"](function(t){throw new Error("Could not update profile with public registry:",t)}).then(function(e){return t.appRegistryListed=u,t})}function p(t,e,r){r=r||{},r.headers=r.headers||{},r.headers.Accept||(r.headers.Accept="text/turtle");var i=[];return t.appRegistryListed.uri&&i.push(t.appRegistryListed.uri),t.appRegistryUnlisted.uri&&i.push(t.appRegistryUnlisted.uri),e.loadParsedGraphs(i,r).then(function(e){return e.forEach(function(e){e&&e.value&&t.addAppRegistry(e.value,e.uri)}),t})}function c(t,e,r){if(!t)throw new Error("No profile provided");if(!t.isLoaded)throw new Error("Profile is not loaded");if(!e||!e.isValid())throw new Error("Invalid app registration");return p(t,r).then(function(t){return e.isListed&&!t.hasAppRegistryPublic()?u(t,r):e.isListed||t.hasAppRegistryPrivate()?t:a(t,r)}).then(function(t){return i(t,e,r)})}function l(t,e,r){var i,n=y(r),o=[];return t?(t.statementsMatching(null,n.app("commonType"),e).forEach(function(e){i=e.subject;var n=new h;n.initFromGraph(i,t,r),o.push(n)}),o):o}t.exports.addToAppRegistry=i,t.exports.blankPrivateAppRegistry=o,t.exports.blankPublicAppRegistry=s,t.exports.initAppRegistryPrivate=a,t.exports.initAppRegistryPublic=u,t.exports.loadAppRegistry=p,t.exports.appsForType=n,t.exports.registerApp=c,t.exports.registrationsFromGraph=l;var h=r(28),d=r(30),f=r(31),y=r(9),g=r(31)},function(t,e,r){"use strict";function i(t,e,r){t=t||{},this.isListed=r,this.name=t.name,this.redirectTemplateUri=t.redirectTemplateUri,this.registrationUri=null,this.shortdesc=t.shortdesc,this.types=e||[]}t.exports=i;var n=r(7),o=r(9),s=r(29);i.prototype.hashFragment=function(){var t=n.unique(this.redirectTemplateUri);return t},i.prototype.initFromGraph=function(t,e,r){this.registrationUri=t.uri,this.isListed=!!s.isListed(e,r),this.types=[];var i=this,n=o(r);e.statementsMatching(t,n.app("commonType")).forEach(function(t){i.types.push(t.object.uri)});var a;a=e.any(t,n.app("name")),a&&(this.name=a.value),a=e.any(t,n.app("shortdesc")),a&&(this.shortdesc=a.value),a=e.any(t,n.app("redirectTemplateUri")),a&&(this.redirectTemplateUri=a.value)},i.prototype.isValid=function(){return this.name&&this.redirectTemplateUri&&this.types.length>0},i.prototype.rdfStatements=function(t){var e=t.namedNode("#"+this.hashFragment()),r=[],i=o(t);return r.push(t.triple(e,i.rdf("type"),i.solid("AppRegistration")),t.triple(e,i.app("name"),this.name),t.triple(e,i.app("shortdesc"),this.shortdesc),t.triple(e,i.app("redirectTemplateUri"),this.redirectTemplateUri)),this.types.forEach(function(n){r.push(t.triple(e,i.app("commonType"),n))}),r}},function(t,e,r){"use strict";function i(t,e){var r=o(e);return t.any(null,null,r.solid("UnlistedDocument"),t.uri)}function n(t,e){var r=o(e);return t.any(null,null,r.solid("ListedDocument"),t.uri)}t.exports.isListed=n,t.exports.isUnlisted=i;var o=r(9)},function(t,e){"use strict";function r(t,e){e.statementsMatching(u).forEach(function(e){t.add(e.subject,e.predicate,e.object,e.why)})}function i(t,e){return"string"!=typeof t&&(t=t.toNT()),e&&t.endsWith(".")&&(t=t.slice(0,-1)),t}function n(t,e){var r=e.graph();return t.forEach(function(t){r.addStatement(t)}),r}function o(t,e,r,i){var n=i.graph();return i.parse(e,n,t,r),n}function s(t,e,r,i,n){var o={},s=t.statementsMatching(e,r,i,n);return s.forEach(function(t){o[t.object.uri]=!0}),Object.keys(o)}function a(t){var e=t.map(function(t){return t.toNT()});return e=e.join("\n")}t.exports.appendGraph=r,t.exports.parseGraph=o,t.exports.parseLinks=s,t.exports.serializeStatements=a,t.exports.graphFromStatements=n,t.exports.statementToNT=i;var u=null},function(t,e,r){"use strict";function i(t,e){var r={};if(t){var i=t.split(",");i.forEach(function(e){e&&t.indexOf(e)>=0&&(r[e.trim().toLowerCase()]=!0)})}return e&&e.indexOf("application/sparql-update")>=0&&(r.patch=!0),r}function n(t){if(!t)return{};for(var e=/<[^>]*>\s*(\s*;\s*[^\(\)<>@,;:"\/\[\]\?={} \t]+=(([^\(\)<>@,;:"\/\[\]\?={} \t]+)|("[^"]*")))*(,|$)/g,r=/[^\(\)<>@,;:"\/\[\]\?={} \t]+=(([^\(\)<>@,;:"\/\[\]\?={} \t]+)|("[^"]*"))/g,i=t.match(e),n={},o=0;o<i.length;o++)for(var s=i[o].split(">"),a=s[0].substring(1),u=s[1],p=u.match(r),c=0;c<p.length;c++){var l=p[c],h=l.split("="),d=h[1].replace(/["']/g,"");n[d]||(n[d]=[]),n[d].push(a),n[d].length>1&&n[d].sort()}return n}function o(t){var e,r,i,n,o=t.split("//");return 2===o.length?(e=o[0],r=o[1]):r=t,n=r.split("/"),i=e?e+"//"+n[0]:n[0],t.startsWith("//")&&(i="//"+i),i}function s(t,e){return e&&"http"!==e.slice(0,4)?[t,e].map(function(t){return"/"===t[0]&&(t=t.slice(1)),"/"===t[t.length-1]&&(t=t.slice(0,t.length-1)),t}).join("/"):e}function a(t,e){var r="",i=!0;return t&&t.length>0&&(t=t.map(function(t){return u.statementToNT(t,i)}),r+="DELETE DATA { "+t.join(" . ")+" };\n"),e&&e.length>0&&(e=e.map(function(t){return u.statementToNT(t,i)}),r+="INSERT DATA { "+e.join(" . ")+" };\n"),r}t.exports.composePatchQuery=a,t.exports.parseAllowedMethods=i,t.exports.parseLinkHeader=n,t.exports.absoluteUrl=s,t.exports.hostname=o;var u=r(30)},function(t,e,r){"use strict";function i(t){var e=t.namedNode(""),r=w(t),i=[t.triple(e,r.rdf("type"),r.solid("TypeIndex")),t.triple(e,r.rdf("type"),r.solid("UnlistedDocument"))],n={data:g.serializeStatements(i),graph:g.graphFromStatements(i,t),slug:"privateTypeIndex.ttl",uri:null};return n}function n(t){var e=t.namedNode(""),r=w(t),i=[t.triple(e,r.rdf("type"),r.solid("TypeIndex")),t.triple(e,r.rdf("type"),r.solid("ListedDocument"))],n={data:g.serializeStatements(i),graph:g.graphFromStatements(i,t),slug:"publicTypeIndex.ttl",uri:null};return n}function o(t,e,r){r=r||{};var n=e.rdf,o=w(n),s=t.typeRegistryDefaultContainer(),a=n.namedNode(t.webId),u=i(n);return e.post(s,u.data,u.slug)["catch"](function(t){throw new Error("Could not create privateIndex document:",t)}).then(function(i){u.uri=y.absoluteUrl(m.hostname(s),i.url);var p=[n.triple(a,o.solid("privateTypeIndex"),n.namedNode(u.uri))],c=[];return e.patch(t.privateProfileUri(),c,p,r)})["catch"](function(t){throw new Error("Could not update profile with private index:"+t)}).then(function(e){return t.typeIndexUnlisted=u,t})}function s(t,e,r){r=r||{};var i=e.rdf,o=w(i),s=t.typeRegistryDefaultContainer(),a=i.namedNode(t.webId),u=n(i);return e.post(s,u.data,u.slug)["catch"](function(t){throw new Error("Could not create publicIndex document:",t)}).then(function(n){u.uri=y.absoluteUrl(m.hostname(s),n.url);var p=[i.triple(a,o.solid("publicTypeIndex"),i.namedNode(u.uri))],c=[];return e.patch(t.webId,c,p,r)})["catch"](function(t){throw console.log(t),new Error("Could not update profile with public index:",t)}).then(function(e){return t.typeIndexListed=u,t})}function a(t,e,i,n,o,s){var a,u,p=r(7),c=n.rdf,l=w(c),h=p.unique(e.uri);if(s?(a=t.typeIndexListed.uri,u=t.typeIndexListed.graph):(a=t.typeIndexUnlisted.uri,u=t.typeIndexUnlisted.graph),!a)throw new Error("Cannot register type, registry URL missing");var d,f=c.namedNode(a+"#"+h);"instance"===o?d=l.solid("instance"):(d=l.solid("instanceContainer"),i.lastIndexOf("/")!==i.length-1&&(i+="/"));var y=[],m=[c.triple(f,l.rdf("type"),l.solid("TypeRegistration")),c.triple(f,l.solid("forClass"),e),c.triple(f,d,c.namedNode(i))];return n.patch(a,y,m).then(function(e){var r=g.graphFromStatements(m,c);return u?g.appendGraph(u,r):u=r,t})}function u(t,e,r){r=r||{},r.headers=r.headers||{},r.headers.Accept||(r.headers.Accept="text/turtle");var i=[];return t.typeIndexListed.uri&&i.push(t.typeIndexListed.uri),t.typeIndexUnlisted.uri&&i.push(t.typeIndexUnlisted.uri),e.loadParsedGraphs(i,r).then(function(e){return e.forEach(function(e){e&&e.value&&t.addTypeRegistry(e.value,e.uri)}),t})}function p(t,e,r,i,n,p){if(!t)throw new Error("No profile provided");if(!t.isLoaded)throw new Error("Profile is not loaded");if(!e||!r)throw new Error("Type registration requires type class and location");if(i=i||"container","container"!==i&&"instance"!==i)throw new Error("Invalid location type");return u(t,p).then(function(t){return n&&!t.hasTypeRegistryPublic()?s(t,p):n||t.hasTypeRegistryPrivate()?t:o(t,p)}).then(function(t){return a(t,e,r,p,i,n)})}function c(t,e,r){var i=[],n=!0;return i.concat(l(t.typeIndexListed.graph,e,n,r)).concat(l(t.typeIndexUnlisted.graph,e,!n,r))}function l(t,e,r,i){var n,o,s,a=w(i),u=[];if(!t)return u;var p=t.statementsMatching(null,null,e);return p.forEach(function(i){n=i.subject,o=t.statementsMatching(n,a.solid("instance")),o.forEach(function(t){u.push(new f(n.uri,e,"instance",t.object.uri,r))}),s=t.statementsMatching(n,a.solid("instanceContainer")),s.forEach(function(t){u.push(new f(n.uri,e,"container",t.object.uri,r))})}),u}function h(t,e,r,i,n){var o,s,a=r.rdf;if(i?(o=t.typeIndexListed.uri,s=t.typeIndexListed.graph):(o=t.typeIndexUnlisted.uri,s=t.typeIndexUnlisted.graph),!o)throw new Error("Cannot unregister type, registry URL missing");var u=l(s,e,i,a);if(0===u.length)return Promise.resolve(t);n&&(u=u.filter(function(t){return t.locationUri===n}));var p=[];u.forEach(function(t){s.statementsMatching(a.namedNode(t.registrationUri)).forEach(function(t){p.push(t)})});var c=[];return r.patch(o,p,c).then(function(e){return t.reloadTypeRegistry(r)})}function d(t,e,r,i,n){if(!t)throw new Error("No profile provided");if(!t.isLoaded)throw new Error("Profile is not loaded");if(!e)throw new Error("Unregistering a type requires type class");return u(t,n).then(function(t){if(r&&!t.typeIndexListed.graph)throw new Error("Profile has no Listed type index");if(!r&&!t.typeIndexUnlisted.graph)throw new Error("Profile has no Unlisted type index");return h(t,e,n,r,i)})}t.exports.blankPrivateTypeIndex=i,t.exports.blankPublicTypeIndex=n,t.exports.initTypeRegistryPrivate=o,t.exports.initTypeRegistryPublic=s,t.exports.loadTypeRegistry=u,t.exports.registerType=p,t.exports.typeRegistryForClass=c,t.exports.unregisterType=d;var f=r(33),y=r(31),g=r(30),m=r(31),w=r(9)},function(t,e){"use strict";function r(t,e,r,i,n){this.isListed=n,this.locationType=r,this.locationUri=i,this.rdfClass=e,this.registrationUri=t}t.exports=r,r.prototype.isContainer=function(){return"container"===this.locationType},r.prototype.isInstance=function(){return"instance"===this.locationType}},12,function(t,e,r){"use strict";var i=r(36);t.exports.version=function(){return i.version}},function(t,e){t.exports={name:"solid-client",version:"0.21.0",description:"Common library for writing Solid read-write-web applications",main:"./index.js",files:["index.js","config.js","lib","dist"],scripts:{"build-full":"webpack --progress --config webpack.config.js --output-filename ./dist/solid-client.js","build-with-rdflib":"webpack --progress --colors --optimize-minimize --optimize-occurrence-order --optimize-dedupe --config webpack.config.js","build-without-rdflib":"webpack --progress --colors --optimize-minimize --optimize-occurrence-order --optimize-dedupe --config webpack-no-rdflib.config.js","build-qunit-resources":"npm run clean && mkdir -p dist/resources && npm run build-full && browserify -r ./test/resources/profile-minimal.js:test-minimal-profile -o dist/resources/test-minimal-profile.js && browserify -r ./test/resources/profile-private.js:test-minimal-prefs -o dist/resources/test-minimal-prefs.js",build:"npm run test && npm run clean && mkdir dist && npm run build-with-rdflib && npm run build-without-rdflib",prepublish:"npm run build",clean:"rm -rf dist/",standard:"standard lib/*",tape:"tape test/unit/*.js",test:"npm run standard && npm run tape",qunit:"npm run build-qunit-resources && open test/integration/index.html"},babel:{presets:["es2015"]},repository:{type:"git",url:"https://github.com/solid/solid-client"},keywords:["solid","decentralized","web","rdf","ldp","linked","data"],author:"Andrei Sambra <andrei@fcns.eu>",maintainers:[{name:"Dmitri Zagidulin",url:"https://github.com/dmitrizagidulin/"}],license:"MIT",bugs:{url:"https://github.com/solid/solid-client/issues"},homepage:"https://github.com/solid/solid-client",dependencies:{rdflib:"^0.8.0",shorthash:"0.0.2","solid-auth-tls":"0.0.3","solid-namespace":"0.0.1","solid-permissions":"0.1.0","solid-web-client":"0.0.4"},devDependencies:{"babel-cli":"^6.11.4","babel-core":"^6.11.4","babel-loader":"^6.2.4","babel-preset-es2015":"^6.9.0","blue-tape":"^0.2.0","json-loader":"^0.5.4",qunit:"^0.9.0",standard:"^5.4.1",tape:"^4.4.0",webpack:"^1.13.1"},standard:{globals:["$rdf","SolidClient","tabulator","QUnit"]}}},function(t,e){"use strict";function r(){return window.navigator.onLine}function i(t){window.addEventListener("offline",t,!1)}function n(t){window.addEventListener("online",t,!1)}t.exports.isOnline=r,t.exports.onOffline=i,t.exports.onOnline=n}]));
//# sourceMappingURL=solid-client.min.js.map